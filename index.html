<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de Nuages de Mots</title>
    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.js"></script>
    <style>
        /* Assure que tout le contenu tient dans la page */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: #F7F7F7;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; /* Évite les barres de défilement */
        }

        h1 {
            text-align: center;
            color: rgb(38, 30, 72); /* Violet foncé EPSI */
            font-weight: 600;
            margin: 20px 0;
        }

        textarea {
            width: 80%;
            height: 120px;
            margin: 10px auto;
            display: block;
            border: 2px solid rgb(54, 182, 212); /* Bleu clair EPSI */
            border-radius: 5px;
            padding: 10px;
            font-size: 1rem;
            color: rgb(75, 75, 153); /* Bleu foncé EPSI */
            box-sizing: border-box;
        }

        button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            background-color: rgb(217, 71, 89); /* Rouge EPSI */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: rgb(228, 128, 62); /* Orange clair EPSI */
        }

        /* Le conteneur pour le nuage de mots */
        #wordcloud {
            width: 80%;
            height: calc(100vh - 250px); /* S'adapte à la hauteur totale visible */
            margin: 20px auto;
            border: 2px solid rgb(143, 190, 84); /* Vert EPSI */
            background-color: white;
            border-radius: 10px;
            box-sizing: border-box; /* Inclus la bordure dans la taille */
        }
    </style>
</head>
<body>
    <h1>Générateur de Nuages de Mots</h1>
    <textarea id="text-input" placeholder="Collez ou saisissez vos mots ici..."></textarea>
    <button onclick="generateWordCloud()">Générer le Nuage</button>
    <div id="wordcloud"></div>

    <script>
        // Génération du nuage de mots
        function generateWordCloud() {
            const inputText = document.getElementById('text-input').value;
            const words = inputText.split(/\s+/).reduce((acc, word) => {
                acc[word] = (acc[word] || 0) + 1;
                return acc;
            }, {});

            const wordArray = Object.entries(words).map(([text, weight]) => [text, weight]);

            WordCloud(document.getElementById('wordcloud'), {
                list: wordArray,
                gridSize: 10,
                weightFactor: 10,
                color: function() {
                    return ['rgb(54, 182, 212)', 'rgb(75, 75, 153)', 'rgb(38, 30, 72)', 'rgb(250, 207, 83)'][Math.floor(Math.random() * 4)];
                },
                rotateRatio: 0.5,
                rotationSteps: 2,
                backgroundColor: '#ffffff'
            });

            // Ajuster la hauteur de l'iframe
            sendHeightToParent();
        }

        // Fonction pour envoyer la hauteur au parent (iframe)
        function sendHeightToParent() {
            window.parent.postMessage({ height: document.documentElement.scrollHeight }, '*');
        }

        // Envoyer la hauteur initiale après chargement
        window.onload = sendHeightToParent;

        // Envoyer la nouvelle hauteur si la fenêtre est redimensionnée
        window.onresize = sendHeightToParent;
    </script>
</body>
</html>
